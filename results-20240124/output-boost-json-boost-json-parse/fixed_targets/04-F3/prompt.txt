Given the following C++ program and its build error message, fix the code to achieve the original functionality.

If a function is missing, fix it by including the related libraries.

If the error contains "undefined reference to", this means one or more of the header <code>#include</code> directives need to be wrapped with <code>extern "C" {}</code> for the object linking to succeed. You must fix this by rewriting the relevant <code>#include</code> and wrapping it with <code>extern "C" {}</code>.

Below is the code needs to be built:
<code>
#include <boost/json.hpp>
#include <fstream>
#include <iostream>
#include <string>

extern "C" {
#include <boost/iostreams/filtering_streambuf.hpp>
#include <boost/iostreams/copy.hpp>
#include <boost/iostreams/filter/gzip.hpp>
}

int main() {
  std::string json_string = R"({
    "name": "John Doe",
    "age": 30,
    "city": "New York"
  })";

  // Create a gzip-compressed output stream
  std::ofstream compressed_file("data.json.gz", std::ios::binary);
  boost::iostreams::filtering_streambuf<boost::iostreams::input> out;
  out.push(boost::iostreams::gzip_compressor());
  out.push(compressed_file);

  // Write the JSON string to the compressed stream
  boost::json::stream_parser parser(out);
  boost::system::error_code ec;
  parser.write(boost::string_view(json_string), ec);
  if (ec) {
    std::cerr << "Error writing JSON string: " << ec.message() << std::endl;
    return 1;
  }

  // Close the compressed stream
  out.close();

  return 0;
}
</code>

The code has the following build issues:
<error>

</error>

Fix code:
1. Consider the possible solution for the issues listed above.
2. Apply the solutions to the original code.
It's important to show the complete code, not only the fixed line.
<solution>
