Given the following C++ program and its build error message, fix the code to achieve the original functionality.

If a function is missing, fix it by including the related libraries.

If the error contains "undefined reference to", this means one or more of the header <code>#include</code> directives need to be wrapped with <code>extern "C" {}</code> for the object linking to succeed. You must fix this by rewriting the relevant <code>#include</code> and wrapping it with <code>extern "C" {}</code>.

Below is the code needs to be built:
<code>
#include <algorithm> // Fix the missing header file

#include <fuzzer/FuzzedDataProvider.h>

#include <cstddef>
#include <cstdint>
#include <cstdio>
#include <cstdlib>
#include <vector>

#include "avahi-common/defs.h"
#include "avahi-common/malloc.h"
#include "avahi-common/simple-watch.h"
#include "avahi-common/thread-watch.h"
#include "avahi-common/timeval.h"
#include "avahi-core/error.h" // Fix the missing header file
#include "avahi-core/server.h"
#include "avahi-core/util.h"

extern "C" int LLVMFuzzerTestOneInput(const uint8_t* data, size_t size) {
  AvahiServer *server = nullptr;
  AvahiSimplePoll *simple_poll = nullptr;
  AvahiWatch *watch = nullptr;
  AvahiError error;
  AvahiSimplePoll *poll = nullptr;
  char *host_name = nullptr;

  avahi_set_malloc_failure_handler(avahi_malloc_failure_handler);

  avahi_simple_poll_new(&simple_poll);
  avahi_server_new(AVAHI_SERVER_USE_DNS, &server, &error);
  if (server) {
    avahi_server_add_poll(server, simple_poll);
    avahi_server_watch(server, &watch);
    avahi_simple_poll_get(simple_poll, &poll);
  }

  host_name = avahi_get_host_name_strdup();
  free(host_name);

  if (watch)
    avahi_watch_free(watch);
  if (server)
    avahi_server_free(server);
  if (poll)
    avahi_simple_poll_free(poll);
  if (simple_poll)
    avahi_simple_poll_free(simple_poll);

  return 0;
}
</code>

The code has the following build issues:
<error>
fuzz/fuzz-consume-record.c:1:10: fatal error: 'algorithm' file not found
#include <algorithm> // Fix the missing header file
         ^~~~~~~~~~~
1 error generated.

Fix failure
fuzz/fuzz-consume-record.cpp:16:10: fatal error: 'avahi-core/error.h' file not found
#include "avahi-core/error.h" // Fix the missing header file
         ^~~~~~~~~~~~~~~~~~~~
1 error generated.
</error>

Fix code:
1. Consider the possible solution for the issues listed above.
2. Apply the solutions to the original code.
It's important to show the complete code, not only the fixed line.
<solution>
