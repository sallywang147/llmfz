Given the following C++ program and its build error message, fix the code to achieve the original functionality.

If a function is missing, fix it by including the related libraries.

If the error contains "undefined reference to", this means one or more of the header <code>#include</code> directives need to be wrapped with <code>extern "C" {}</code> for the object linking to succeed. You must fix this by rewriting the relevant <code>#include</code> and wrapping it with <code>extern "C" {}</code>.

Below is the code needs to be built:
<code>
#include <cstddef>
#include <cstdint>
#include <string>

extern "C" {
#include "Firestore/core/src/core/query.h"
#include "Firestore/core/src/model/document_comparator.h"
}

extern "C" int LLVMFuzzerTestOneInput(const uint8_t* data, size_t size) {
  const char* str_ptr = reinterpret_cast<const char*>(data);
  std::string str{str_ptr, size};
  firebase::firestore::model::DocumentComparator comparator;
  firebase::firestore::core::Query query;
  query.Comparator(&comparator);
  return 0;
}
</code>

The code has the following build issues:
<error>
/usr/local/bin/../include/c++/v1/__functional/is_transparent.h:24:1: error: templates must have C++ linkage
template <class _Tp, class, class = void>
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:476:
/usr/local/bin/../include/c++/v1/__functional/is_transparent.h:28:8: error: explicit specialization of undeclared template struct '__is_transparent'
struct __is_transparent<_Tp, _Up,
       ^               ~~~~~~~~~~
/usr/local/bin/../include/c++/v1/__functional/is_transparent.h:27:1: error: templates must have C++ linkage
template <class _Tp, class _Up>
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:38:1: error: templates must have C++ linkage
template <class _Tp, class _Compare, class _Allocator> class __tree;
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:39:1: error: templates must have C++ linkage
template <class _Tp, class _NodePtr, class _DiffType>
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:41:1: error: templates must have C++ linkage
template <class _Tp, class _ConstNodePtr, class _DiffType>
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:44:1: error: templates must have C++ linkage
template <class _Pointer> class __tree_end_node;
^~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:45:1: error: templates must have C++ linkage
template <class _VoidPtr> class __tree_node_base;
^~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:46:1: error: templates must have C++ linkage
template <class _Tp, class _VoidPtr> class __tree_node;
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:48:1: error: templates must have C++ linkage
template <class _Key, class _Value>
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:51:1: error: templates must have C++ linkage
template <class _Allocator> class __map_node_destructor;
^~~~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:52:1: error: templates must have C++ linkage
template <class _TreeIterator> class _LIBCPP_TEMPLATE_VIS __map_iterator;
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:53:1: error: templates must have C++ linkage
template <class _TreeIterator> class _LIBCPP_TEMPLATE_VIS __map_const_iterator;
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:78:1: error: templates must have C++ linkage
template <class _NodePtr>
^~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:89:1: error: templates must have C++ linkage
template <class _NodePtr>
^~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:124:1: error: templates must have C++ linkage
template <class _NodePtr>
^~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:144:1: error: templates must have C++ linkage
template <class _NodePtr>
^~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:156:1: error: templates must have C++ linkage
template <class _NodePtr>
^~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
In file included from /src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:6:
In file included from /src/firebase-ios-sdk/Firestore/core/src/core/query.h:23:
In file included from /usr/local/bin/../include/c++/v1/set:479:
/usr/local/bin/../include/c++/v1/__tree:168:1: error: templates must have C++ linkage
template <class _NodePtr>
^~~~~~~~~~~~~~~~~~~~~~~~~
/src/firebase-ios-sdk/Firestore/fuzzing/fieldpath_fuzzer.cc:5:1: note: extern "C" language linkage specification begins here
extern "C" {
^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
20 errors generated.
</error>

Fix code:
1. Consider the possible solution for the issues listed above.
2. Apply the solutions to the original code.
It's important to show the complete code, not only the fixed line.
<solution>
