Given the following C++ program and its build error message, fix the code to achieve the original functionality.

If a function is missing, fix it by including the related libraries.

If the error contains "undefined reference to", this means one or more of the header <code>#include</code> directives need to be wrapped with <code>extern "C" {}</code> for the object linking to succeed. You must fix this by rewriting the relevant <code>#include</code> and wrapping it with <code>extern "C" {}</code>.

Below is the code needs to be built:
<code>
#include <stdint.h>
#include <stdio.h>
#include <string.h>

extern "C" {
#include "lwan-config.h"
}

#define LWAN_NO_DISCARD(...)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \
  do {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 \
    __typeof__(__VA_ARGS__) no_discard_ = __VA_ARGS__;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 \
    __asm__ __volatile__("" ::"g"(no_discard_) : "memory");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \
  } while (0)

static bool dump(struct config *config, int indent_level) {
  const struct config_line *line;

  if (indent_level > 64)
    return false;

  while ((line = config_read_line(config))) {
    switch (line->type) {
    case CONFIG_LINE_TYPE_LINE:
      LWAN_NO_DISCARD(parse_bool(line->value, false));
      LWAN_NO_DISCARD(parse_long(line->value, 0));
      LWAN_NO_DISCARD(parse_int(line->value, 0));
      LWAN_NO_DISCARD(parse_time_period(line->value, 0));
      break;

    case CONFIG_LINE_TYPE_SECTION_END:
      if (indent_level == 0)
        return false;

      return true;

    case CONFIG_LINE_TYPE_SECTION:
      if (!dump(config, indent_level + 1))
        return false;

      break;
    }
  }

  const char *error = config_last_error(config);

  if (error) {
    printf("Error: %s\n", error);
    return false;
  }

  return true;
}

extern "C" int LLVMFuzzerTestOneInput(const uint8_t *data, size_t size) {
  struct config *config;
  struct lwan l;

  config = config_open_for_fuzzing(data, size);
  if (!config)
    return 1;

  bool dumped = dump(config, 0);

  if (dumped)
    lwan_init_with_config(&l, config);

  config_close(config);

  return dumped ? 1 : 0;
}

// Add the missing function definitions here
bool parse_bool(const char *value, bool def) { return strcasecmp(value, "true") == 0; }
long parse_long(const char *value, long def) { return strtol(value, NULL, 0); }
int parse_int(const char *value, int def) { return strtol(value, NULL, 0); }
int parse_time_period(const char *value, int def) { return strtol(value, NULL, 0); }
</code>

The code has the following build issues:
<error>

</error>

Fix code:
1. Consider the possible solution for the issues listed above.
2. Apply the solutions to the original code.
It's important to show the complete code, not only the fixed line.
<solution>
